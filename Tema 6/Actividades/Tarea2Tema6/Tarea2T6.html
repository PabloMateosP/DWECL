<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script>

        function menu() {

            var salir = false;

            var datosProductos = [];

            while (salir == false) {

                var datos = (prompt("1. Ver cesta \n2. Insertar un artículo \n3. Borrar un artículo \n4. Vaciar cesta \n5. Salir"));

                if (datos == null) return;

                switch (datos) {
                    case '1':
                        console.log("Ver cesta elegida");
                        verCesta(datosProductos);
                        break;
                    case '2':
                        console.log("Añadir producto a la cesta");
                        añadirProducto(datosProductos);
                        break;
                    case '3':
                        console.log("Eliminar producto de la cesta");
                        eliminarProducto(datosProductos);
                        break;
                    case '4':
                        console.log("Vaciar cesta");
                        vaciarCesta(datosProductos);
                        break;
                    case '5':
                        console.log("Salir del menú");
                        salir = true;
                        break;
                    default:
                        alert("Elija una opción del 1 - 5");
                }

            }

        }

        function verCesta(datosProductos) {

            var mensaje = "Cod   |      Nombre     |     Precio     |     Cantidad     |     Subtotal\n------------------------------------------------------------------------------ \n"
            var total = 0;

            for (var i = 0; i < datosProductos.length; i++) {
                for (var i2 = 0; i2 < datosProductos[i].length; i2++) {
                    if (datosProductos[i][0] == 0) {

                    } else {

                        mensaje += [datosProductos[i][i2] + "                   "];

                    }

                }

                total += datosProductos[i][4];
                mensaje += "\n------------------------------------------------------------------------------ \n";
            }
            alert(mensaje + '\n                         TOTAL: ' + total); 

        }

        function añadirProducto(datosProductos) {

            var articulo = [];

            var datoCod = Number(datosProductos.length) + 1;

            var datoNombre = prompt('Introduzca el nombre del producto:');

            var datoPrecio = Number(prompt('Introduzca precio del producto'));

            var datoCantidad = Number(prompt('Introduzca cantidad del producto'));

            var subTotal = Number(datoPrecio * datoCantidad);

            articulo.push(datoCod, datoNombre, datoPrecio, datoCantidad, subTotal);

            añadirCesta(articulo, datosProductos);
        }

        function añadirCesta(articulo, datosProductos) {
            datosProductos.push(articulo);
            return datosProductos;
        }

        function eliminarProducto(datosProductos) {
            var codProducto = prompt("Introduzca el código del producto a eliminar:");

            for (var i = 0; i < datosProductos.length; i++) {
                if (datosProductos[i][0] == codProducto) {
                    
                    //Dejamos el id a 0
                    datosProductos[i][0] = 0;

                    //Dejamos el subtotal a 0
                    datosProductos[i][4] = 0;

                } 
            }
            return datosProductos;
        }

        function vaciarCesta(datosProductos) {
            datosProductos.length = 0;
            return datosProductos;
        }

    </script>

</head>

<body>

    <body onload="javascript:menu()" ;></body>

</body>



</html>